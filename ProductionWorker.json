{"slots":{"0":{"name":"databank","type":{"events":[],"methods":[]}},"1":{"name":"slot5","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot2","type":{"events":[],"methods":[]}},"5":{"name":"slot1","type":{"events":[],"methods":[]}},"6":{"name":"slot0","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"-- USERS SET THE FOLLOWING --\n-- USE MASTERBOARD UNIT.START FOR NAME REFERENCES --\n-- IF YOU GET THE NAME WRONG IT WILL FAIL -- \nAssemblies = {  \n   {recipe=\"Laser Thermic Ammo XS\",machine=slot3},\n   {recipe=\"Laser Electromagnetic Ammo XS\",machine=slot1},\n   {recipe=\"Cannon Thermic Ammo XS\",machine=slot5},\n   {recipe=\"Railgun Electromagnetic Ammo XS\",machine=slot2},\n   {recipe=\"Railgun Antimatter Ammo XS\",machine=slot4},\n   {recipe=\"Missile Kinetic Ammo XS\",machine=slot0},    \n   {recipe=\"Missile Kinetic Ammo S\",machine=slot9},\n   {recipe=\"Missile Antimatter Ammo XS\",machine=slot8},    \n   {recipe=\"Missile Antimatter Ammo S\",machine=slot10}\n    \n    \t\t}\n-- USERS DON'T EDIT BELOW THIS LINE --\n\n\n-- Find the core\nfor key, slot in pairs(unit) do\n\tif type(slot) == \"table\" and type(slot.export) == \"table\" then\n\t\tif slot.getElementIdList then\n\t\t\tcore = slot\n\t\tend\n\tend\nend\n\n\nfunction GetAvailableMachine(recipe)\n\tfor k,v in pairs(Assemblies) do\n\t\tif v.recipe == recipe then\n\t\t\tlocal status = v.machine.getStatus()\n\t\t\tif status == \"STOPPED\" then\n\t\t\t\treturn v.machine;\n\t\t\tend\n\t\tend\n\tend\n\treturn nil\nend\nunit.setTimer(\"asTick\", 1)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"0"},{"code":"-- Check databank for all our recipes\nlocal users = json.decode(databank.getStringValue(\"users\"))\nif users == nil then\n\tusers = {}\nend\n\nfor k,v in pairs(Assemblies) do\n\tif databank.hasKey(v.recipe) then\n\t\tlocal amount = databank.getIntValue(v.recipe)\n\t\tlocal machine = GetAvailableMachine(v.recipe)\n\t\tif amount > 0 and machine ~= nil then\n\t\t\tmachine.batchStart(amount)\n\t\t\tdatabank.setIntValue(v.recipe,0)\n\t\t\tlocal amountQueued = 0\n\t\t\tfor key,val in pairs(users) do\n\t\t\t\tif val.recipe == v and databank.getStringValue(val.name .. val.starttime) == nil or databank.getStringValue(val.name .. val.starttime) == \"\" then\n\t\t\t\t\tdatabank.setStringValue(val.name .. val.starttime,system.getTime() + amountQueued*val.duration) \n\t\t\t\t\tamountQueued = amountQueued + val.amount\n\t\t\t\tend \n\t\t\tend\n\t\tend\n\tend\nend","filter":{"args":[{"value":"asTick"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"1"}],"methods":[],"events":[]}